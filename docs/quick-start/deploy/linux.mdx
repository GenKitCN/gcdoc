---
title: ğŸ§ åœ¨â€‰Linuxâ€‰ä¸Šéƒ¨ç½²
sidebar_label: ğŸ§ Linux
---

## ğŸ“¦ ç¯å¢ƒé…ç½®

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>

  <TabItem value="arch" label="Arch Linux" default>

## ğŸ›ï¸ å®‰è£…ä¸€ä¸ªâ€‰AURâ€‰å·¥å…· (å¦‚æœæ²¡æœ‰)

```bash
sudo pacman -S git base-devel
git clone https://aur.archlinux.org/paru.git
cd paru
makepkg -si
```

## ğŸ—ƒï¸ MongoDBâ€‰æ•°æ®åº“

```bash
paru -S mongodb-bin
sudo systemctl enable --now mongodb
```

å¦‚æœâ€‰`systemctl status mongodb`â€‰çš„çŠ¶æ€ä¸ºâ€‰"active"â€‰åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ

## â˜• OpenJDK 17

```bash
sudo pacman -S jdk17-openjdk
sudo archlinux-java set java-17-openjdk
```

å¦‚æœâ€‰`java -version`â€‰æœ‰è¾“å‡ºç±»ä¼¼â€‰`openjdk version "17.0.3" 2022-04-19`â€‰çš„å†…å®¹åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ

## â›“ï¸ mitmproxyâ€‰ä»£ç†

```bash
sudo pacman -S mitmproxy python
```

  </TabItem>

  <TabItem value="ubuntu" label="Ubuntu">

## ğŸ—ƒï¸ MongoDBâ€‰æ•°æ®åº“

```bash title="å¯¼å…¥å¯†é’¥"
sudo apt install gnupg
wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -
```

<Tabs>

  <TabItem value="focal" label="Ubuntu 20.04 (Focal)" default>

```bash title="æ·»åŠ â€‰MongoDBâ€‰è½¯ä»¶æº"
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
```

  </TabItem>

  <TabItem value="bionic" label="Ubuntu 18.04 (Bionic)">

```bash title="æ·»åŠ â€‰MongoDBâ€‰è½¯ä»¶æº"
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
```

  </TabItem>

  <TabItem value="xenial" label="Ubuntu 16.04 (Xenial)">

```bash title="æ·»åŠ â€‰MongoDBâ€‰è½¯ä»¶æº"
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
```


  </TabItem>

</Tabs>

```bash title="å®‰è£…â€‰MongoDB"
sudo apt update
sudo apt install mongodb-org
sudo systemctl enable --now mongod
```

## â˜• OpenJDK 17

```bash
sudo apt install openjdk-17-jdk openjdk-17-jre
```

å¦‚æœâ€‰`java -version`â€‰æœ‰è¾“å‡ºç±»ä¼¼â€‰`openjdk version "17.0.3" 2022-04-19`â€‰çš„å†…å®¹åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ

## â›“ï¸ mitmproxyâ€‰ä»£ç†

```bash
sudo apt install mitmproxy
```

  </TabItem>

  <TabItem value="centos" label="Fedora / CentOS">

:::danger è­¦å‘Š

Fedoraâ€‰å…¨ç³» (åŒ…æ‹¬â€‰CentOS) åœ¨æœ¬æ–‡ä¸­å‡æ— æ³•å¾—åˆ°ä»»ä½•æ”¯æŒ

:::

  </TabItem>

</Tabs>

## ğŸšœ è¿è¡ŒæœåŠ¡å™¨

### ğŸšï¸ æµ‹è¯•

```bash
cd /path/to/grasscutter # è¿›å…¥â€‰Grasscutterâ€‰ç›®å½•
mitmdump -s proxy.py -k --set block_global=false &  # è¿è¡Œâ€‰mitmdumpâ€‰ä»£ç†
sudo java -jar grasscutter.jar # è¿è¡ŒæœåŠ¡å™¨ä¸»æ–‡ä»¶
```

### âœ’ï¸ ç¼–å†™è„šæœ¬

å¦‚æœæµ‹è¯•èµ·æ¥æ²¡é—®é¢˜çš„è¯å¯ä»¥åˆ¶ä½œä¸€ä¸ª Shellâ€‰è„šæœ¬æ–¹ä¾¿ä¸‹æ¬¡è¿è¡Œï¼Œå†…å®¹å¦‚ä¸‹

```bash
#!/bin/bash
cd /path/to/grasscutter
mitmdump -s proxy.py -k --set block_global=false &
sudo java -jar grasscutter.jar
```

### ğŸï¸ ä¿æŒåå°

æ¨èä½¿ç”¨â€‰`screen`â€‰å®ç°ä¿æŒåå°

#### ğŸ“¥ å®‰è£…

<Tabs>

  <TabItem value="arch" label="Arch Linux" default>

```bash
sudo pacman -S screen
```

  </TabItem>

  <TabItem value="ubuntu-debian" label="Ubuntu & Debian">

```bash
sudo apt install screen
```

  </TabItem>

</Tabs>

#### ğŸ› ï¸ ä½¿ç”¨

ç®€å•ä»‹ç»ä¸€ä¸‹â€‰screenâ€‰çš„ä½¿ç”¨æ–¹æ³•

```bash title="åˆ›å»ºä¼šè¯"
screen -S name
```

æ­¤æ—¶ä¾¿è¿›å…¥äº†ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œä¸æ™®é€šçš„ç»ˆç«¯æ— å¼‚ï¼Œåœ¨è¿è¡Œéœ€è¦ä¿æŒçš„å‘½ä»¤åï¼Œå¯ä½¿ç”¨ `Ctrl` + `A`, `D` ç¦»å¼€å½“å‰ä¼šè¯

```bash title="æŸ¥çœ‹ç°æœ‰ä¼šè¯"
screen -ls
```

è¯¥å‘½ä»¤ä¼šåˆ—å‡ºç°æœ‰çš„æ‰€æœ‰ä¼šè¯

```bash title="å›åˆ°ä¼šè¯"
screen -r name
```

æ­¤æ—¶ä¾¿å›åˆ°äº†ä¹‹å‰åˆ›å»ºçš„ä¼šè¯ï¼Œå¯ç»§ç»­å¯¹å…¶ä¸­è¿è¡Œçš„ç¨‹åºè¿›è¡Œæ“ä½œ

ä½¿ç”¨â€‰screenâ€‰åˆ›å»ºçš„ä¼šè¯åœ¨â€‰sshâ€‰æ–­è¿æ—¶ä¹Ÿä¼šä¿æŒè¿è¡Œ

#### å¯é€‰æ­¥éª¤ï¼šä½¿ç”¨ systemd ä½¿å…¶å¼€æœºè‡ªå¯

```bash title="åˆ›å»ºè¿›ç¨‹å®ˆæŠ¤æ–‡ä»¶"
cat << 'TEXT' > /etc/systemd/system/grasscutter.service
[Unit]
Description=Grasscutter Daemon
After=network.target

[Service]
Type=simple
User=root
Restart=on-failure
RestartSec=5s
WorkingDirectory=/path/to/grasscutter # æ›¿æ¢ /path/to/grasscutter ä¸ºæ­£ç¡®è·¯å¾„
ExecStart=/usr/bin/screen -dm -S grasscutter bash -c 'cd /path/to/grasscutter;java -jar ./grasscutter.jar;exec bash' # æ›¿æ¢ /path/to/grasscutter ä¸ºæ­£ç¡®è·¯å¾„
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
TEXT
```

```bash title="è®¾ç½®å¼€æœºè‡ªå¯"
sudo systemctl enable --now grasscutter.service
```

æ³¨æ„ä½¿ç”¨`root`ç”¨æˆ·ç®¡ç†screenè¿›ç¨‹ã€‚

:::info

By [Chi_Tang](https://www.chitang.tech)

è¿è¡ŒæœåŠ¡å™¨éƒ¨åˆ†æ˜¯â€‰[@chitang233](https://t.me/chitang233)â€‰åŸºäºâ€‰[@YidaozhanYa](https://t.me/YidaozhanYa)â€‰çš„[æ–‡ç« ](https://blog.yidaozhan.ga/2022/05/01/grasscutter-on-archlinux/)è¿›è¡Œä¿®æ”¹

systemdéƒ¨åˆ†ç”± [@qwerzl](https://github.com/qwerzl) è´¡çŒ®

ä½¿ç”¨â€‰[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)â€‰åè®®å…±äº«

:::

---
id: deploy_linux
title: 在 Linux 上部署
sidebar_label: Linux
---

## 环境配置

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="arch" label="Arch Linux" default>

## 安装一个 AUR 工具 (如果没有)

```bash
sudo pacman -S git base-devel
git clone https://aur.archlinux.org/paru.git
cd paru
makepkg -si
```

## MongoDB 数据库

```bash
paru -S mongodb-bin
sudo systemctl enable --now mongodb
```

如果 `systemctl status mongodb` 的状态为 "active" 则表示安装成功

## OpenJDK 17

```bash
sudo pacman -S jdk17-openjdk
sudo archlinux-java set java-17-openjdk
```

如果 `java -version` 有输出类似 `openjdk version "17.0.3" 2022-04-19` 的内容则表示安装成功

## mitmproxy 代理

```bash
sudo pacman -S mitmproxy python
```

  </TabItem>
  <TabItem value="ubuntu" label="Ubuntu">
Working in progress
  </TabItem>
  <TabItem value="centos" label="Fedora / CentOS">

:::danger 警告

Fedora 全系(包括 CentOS)在本文中均无法得到任何支持

:::

  </TabItem>
</Tabs>

## 运行服务器

```bash
cd /path/to/grasscutter # 进入 Grasscutter 目录
mitmdump -s proxy.py -k --set block_global=false &  # 运行 mitmdump 代理
sudo /usr/lib/jvm/java-17-openjdk/bin/java -jar grasscutter.jar # 运行服务器主文件
```

如果测试起来没问题的话可以制作一个 Shell 脚本方便下次运行，内容如下

```bash
#!/bin/bash
cd /path/to/grasscutter
mitmdump -s proxy.py -k --set block_global=false &
sudo /usr/lib/jvm/java-17-openjdk/bin/java -jar grasscutter.jar
```

:::info

本文的 Arch Linux 部分是 [@chitang233](https://t.me/chitang233) 基于 [@YidaozhanYa](https://t.me/YidaozhanYa) 的[文章](https://blog.yidaozhan.ga/2022/05/01/grasscutter-on-archlinux/)进行修改

使用 CC BY-SA 4.0 协议共享

:::